<!DOCTYPE html>
<!--[if IE 9]>         <html class="ie9"> <![endif]-->
<!--[if gt IE 9]><!--> <html>         <!--<![endif]-->
  <head>
  <title>Create Credentials on Azure | NetApp Cloud Docs</title>
  <meta charset="utf-8">
  <meta property="og:title" content="Create Credentials on Azure | NetApp Cloud Docs" />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="https://docs.netapp.com/kubernetes-service/us-en/create-auth-credentials-on-azure.html" />
	<meta property="og:description" content="Learn how to create credentials on Azure, so that you can build an Azure cluster using NKS." />
  <meta property="og:image" content="https://docs.netapp.com/kubernetes-service/us-en/images/logo-tophat-social.png" />
  <meta property="og:image:alt" content="NetApp Logo" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="format-detection" content="telephone=no">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge,chrome=1">
  <meta http-equiv="encoding" content="utf-8">
  <meta http-equiv="nss-type" content="Product Documentation">
  <meta http-equiv="nss-subtype" content="User Guide">
  
  <meta name="description" content="Learn how to create credentials on Azure, so that you can build an Azure cluster using NKS.">
  <meta name="keywords" content=" ">

  <!-- Icons -->
  <link rel="icon" href="/kubernetes-service/us-en/images/favicon.ico" type="image/x-icon">

  <!-- RSS Feed -->
  
  <link rel="alternate" type="application/rss+xml" title="NetApp Cloud Docs" href="/kubernetes-service/us-en/feed.xml">
  

  <!-- CSS Definitions: NetApp CSS should be defined after generic css -->

  <!-- Elastic Search -->
  <link rel="stylesheet" href="//cdn.jsdelivr.net/searchkit/0.10.0/theme.css">

  <!-- LUCI CSS Content -->
  <link rel="stylesheet" href="/kubernetes-service/us-en/common/css/esb.min.css">
  <link rel="stylesheet" href="/kubernetes-service/us-en/common/css/netapp-library.min.css">
  <link rel="stylesheet" href="/kubernetes-service/us-en/common/css/doc.css">
  <link rel="stylesheet" href="/kubernetes-service/us-en/common/css/doc-components.css">

  <link rel="stylesheet" href='/kubernetes-service/us-en/css/na-sidebar.css' type='text/css'>
  <link rel='stylesheet' href='/kubernetes-service/us-en/css/na-search.css' type='text/css'>
  <link rel='stylesheet' href='/kubernetes-service/us-en/css/clouddocs.css' type='text/css'>

  <!-- Font awesome seems to affect our GitHub Icon and generic "arrow box" for external links. -->
  <link rel="stylesheet" type="text/css" href="/kubernetes-service/us-en/css/font-awesome.min.css">
  <!-- <link rel="stylesheet" href="/kubernetes-service/us-en/css/customstyles.css"> -->
  <!-- Controls the shadow effect for search dropdown menu -->
  <link rel="stylesheet" href="/kubernetes-service/us-en/css/boxshadowproperties.css">

  <!-- NetApp CSS controls the technical content -->
  <link rel='stylesheet' href='/kubernetes-service/us-en/css/netapp.css' type='text/css'>

  

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
  <!-- Used to import Promise for IE. Required for SearchKit -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bluebird/3.3.5/bluebird.min.js"></script>
  
    <script src='/kubernetes-service/us-en/js/na-search.js'></script>
  

  
  <link rel='stylesheet' href='/kubernetes-service/us-en/css/na-pagenav.css' type='text/css' id="pagenav-css">
  <script src='/kubernetes-service/us-en/js/na-pagenav.js'></script>
  

  <link rel='stylesheet' href='/kubernetes-service/us-en/css/prism.css' type='text/css'>
  <link rel='stylesheet' href='/kubernetes-service/us-en/css/prism-netapp.css' type='text/css'>

  <script src='/kubernetes-service/us-en/js/clouddocs.js'></script>
  <script src='/kubernetes-service/us-en/js/s_code_impl.js'></script>
  <script src='/kubernetes-service/us-en/js/jquery.navgoco.min.js'></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script src='/kubernetes-service/us-en/js/toc.js'></script>
  <script src='/kubernetes-service/us-en/js/customscripts.js'></script>

  <script>
      $(document).ready(function() {
          // Initialize navgoco with default options
          $("#mysidebar").navgoco({
              caretHtml: '',
              accordion: true,
              openClass: 'active', // open
              save: false, // leave false or nav highlighting doesn't work right
              cookie: {
                  name: 'navgoco',
                  expires: false,
                  path: '/'
              },
              slide: {
                  duration: 400,
                  easing: 'swing'
              }
          });

          $("#collapseAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', false);
          });

          $("#expandAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', true);
          });

      });

  </script>
  <script>
      $(function () {
          $('[data-toggle="tooltip"]').tooltip()
      })
  </script>
  <script>
      $(document).ready(function() {
          $("#tg-sb-link").click(function() {
              $("#tg-sb-sidebar").toggle();
              $("#tg-sb-content").toggleClass('col-md-9');
              $("#tg-sb-content").toggleClass('col-md-12');
              $("#tg-sb-icon").toggleClass('fa-toggle-on');
              $("#tg-sb-icon").toggleClass('fa-toggle-off');
          });
      });
  </script>

  <!-- Controls the i18n Browser Redirection -->
  <script>
    var siteLocales = [];
    
      siteLocales.push("zz");
    
      siteLocales.push("en");
    
      siteLocales.push("us-en");
    

    standardizeUrl(siteLocales, "clouddocs.netapp.com", "https://docs.netapp.com");
  </script>

  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-81697994-3"></script>
  <script>
  if (document.location.hostname === "docs.netapp.com") {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-81697994-3');
  }
  </script>
</head>


  <body class="n-doc__component-detail">
    <a href="#n-main-content" class="visually-hidden">Skip to main content</a>
<div class="n-off-canvas-menu">
  <div class="n-off-canvas-menu__menu">
    <div class="n-off-canvas-menu__menu-inner">
      <div class="n-off-canvas-menu__property-title">NetApp Cloud Docs</div>
      <ul class="n-off-canvas-menu__property-navigation-list">
        <li class="n-off-canvas-menu__property-navigation-list-item ">
          <a href="https://docs.netapp.com/us-en/" class="n-off-canvas-menu__property-navigation-link">
            Home
          </a>
          <div class="n-off-canvas-menu__child-menu">
            <ul class="n-menu__list">

            </ul>
          </div>
        </li>
      </ul>

      <ul class="n-off-canvas-menu__global-navigation-list">
         <li class="n-off-canvas-menu__global-navigation-list-header">More From NetApp</li>
         <li class="n-off-canvas-menu__global-navigation-list-item"><a href="#" class="n-off-canvas-menu__global-navigation-link">Netapp.com</a></li>
      </ul>
    </div>
  </div>
</div>

    <div class="n-off-canvas-menu__content-wrap">
      <!-- Header -->
      <header>
  <!-- Top Hat -->
  <div class="n-top-hat">
    <div class="n-container">
      <div class="n-top-hat__cross-property-nav">
        <ul class="n-top-hat__list">
            <li class="n-top-hat__list-item">
              <a href="http://www.netapp.com" class="n-top-hat__link">NetApp.com</a>
            </li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Property Bar -->
  <div class="n-property-bar n-property-bar--v3">
    <div class="n-property-bar__inner-wrap">
      <div class="n-property-bar__menu-toggle">
        <a href="#" class="n-property-bar__menu-toggle-link"><span class="n-property-bar__menu-toggle-text">Menu</span><svg class="n-icon-bars n-property-bar__menu-toggle-icon" aria-labelledby="title">
          <title>bars</title>
          <use xlink:href="/kubernetes-service/us-en/common/svg/sprite.svg#bars"></use>
        </svg></a>
      </div>
      <div class="n-property-bar__property-mark n-property-bar__property-mark--has-property-name">
        <a class="n-property-bar__property-link" href="https://docs.netapp.com/us-en/">
          <div class="n-property-bar__logo">
            <svg class="n-icon-netapp-mark n-property-bar__netapp-mark-icon" aria-labelledby="title">
              <title>netapp-mark</title>
              <use xlink:href="/kubernetes-service/us-en/common/svg/sprite.svg#netapp-mark"></use>
            </svg>
            <svg viewBox="0 0 1008 181.537" class="n-property-bar__logo-svg" aria-labelledby="title">
              <title>NetApp</title>
              <use xlink:href="/kubernetes-service/us-en/common/svg/sprite.svg#netapp-logo"></use>
            </svg>
          </div>
          <h2 class="n-property-bar__property-name">Cloud Docs</h2>
        </a>
      </div>

      <!-- NetApp Search Bar -->
      
      <div id="search-demo-container" class="n-property-bar__search">
        <div id="react-search"></div>
      </div>
      

      <div id="ie-i18n-menu" class="n-property-bar__utils">
        <ul class="n-property-navigation-bar__utils-list">
          <li class="n-property-navigation-bar__utils-list-item">
            <a href="#" class="n-property-navigation-bar__utils-link n-property-navigation-bar__nav-link n-property-navigation-bar__language-selector-toggle" data-menu-id="n-property-navigation-bar__menu--language-selector">
              <svg class="n-icon-globe n-globe__icon" aria-labelledby="title">
                <title>globe</title>
                <use xlink:href="/kubernetes-service/us-en/common/svg/sprite.svg#globe"></use>
              </svg>
            </a>
          </li>
        </ul>
      </div>
      <!-- End NetApp Search Bar -->
    </div>

    <div class="n-property-bar__menus">
      <div id="n-property-navigation-bar__menu--language-selector" class="n-menu n-menu--v3">
        <div class="n-language-selector-menu">
          <div class="n-language-selector-menu__header">
            <span class="n-language-selector-menu__title">Select Your Language</span>
          </div>
          <ul class="n-menu__list">
            <li class="n-menu__list-column">
              <ul class="n-menu__list">
                <li class="n-menu__list-item n-menu__list-item--level-1">
                  <a href="/kubernetes-service/us-en/" class="n-menu__header-text">English</a>
                </li>
              </ul>
            </li>
          </ul>
          <div class="menu__footer">
            <p>Current Language: us-en
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>


      <!-- Content -->
      <main role="main" id="n-main-content" class="n-main-content">
        <div class="n-container">
  <div class="n-row">
    <div class="n-doc n-doc__component-list">
      <!-- Sidebar Column -->
      
      <div class="col-md-3" >
          

<ul id="mysidebar" class="nav">
  

  
    <li><a href="index.html">NKS Docs</a></li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Setup - Add Credentials</a>
      <ul>
        

  
    <li><a href="create-auth-credentials-on-aws.html">Create Credentials on AWS</a></li>
  

  
    <li class="active"><a href="create-auth-credentials-on-azure.html">Create Credentials on Azure</a></li>
  

  
    <li><a href="create-auth-credentials-on-gce.html">Create Credentials on GCE</a></li>
  

  
    <li><a href="create-auth-credentials-on-gke.html">Create Credentials on GKE</a></li>
  

  
    <li><a href="find-aws-credentials-for-cvs.html">Find AWS Credentials for CVS</a></li>
  


      </ul>
    </li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">API</a>
      <ul>
        

  
    <li><a href="api-basics.html">API Basics</a></li>
  

  
    <li><a href="api-organizations.html">Organizations</a></li>
  

  
    <li><a href="api-workspaces.html">Workspaces</a></li>
  

  
    <li><a href="api-teams.html">Teams</a></li>
  

  
    <li><a href="api-members.html">Members</a></li>
  

  
    <li><a href="api-user.html">User</a></li>
  

  
    <li><a href="api-keysets.html">Keysets</a></li>
  

  
    <li><a href="api-clusters.html">Clusters</a></li>
  

  
    <li><a href="api-nodes.html">Nodes</a></li>
  

  
    <li><a href="api-nodepools.html">Nodepools</a></li>
  

  
    <li><a href="api-federations.html">Federations</a></li>
  

  
    <li><a href="api-trusted-charts.html">Trusted Charts</a></li>
  


      </ul>
    </li>
  

  
    <li><a href="whitelist-ports-and-ip-addresses.html">Whitelist Ports and IP Addresses</a></li>
  

  
    <li><a href="intro-to-terraform-on-nks.html">Terraform on NKS</a></li>
  

  
    <li><a href="install-kubectl-to-control-a-kubernetes-cluster.html">Install Kubectl</a></li>
  

  
    <li><a href="using-the-kubernetes-cloud-backup.html">Using the Kubernetes Cloud Backup</a></li>
  

  
    <li><a href="managing-ingresses-on-kubernetes.html">Managing Ingresses on Kubernetes</a></li>
  

  
    <li><a href="news.html">News</a></li>
  


</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

      </div>
      

      <div class="n-doc__component-detail-content n-doc__component-detail-content--show-code">
        <!-- Begin of page container -->
        <article class="page-content">
          

<div class="n-doc__component-detail-heading-wrap">
  <h1 class="n-doc__component-detail-heading">Create Credentials on Azure
    <span>
      
        <a target="_blank" href="https://github.com/NetAppDocs/kubernetes-service/blob/master/create-auth-credentials-on-azure.adoc" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit on GitHub</a>
        <a target="_blank" href="https://github.com/NetAppDocs/kubernetes-service/issues/new?body=Page%3A%20[Create Credentials on Azure](https://docs.netapp.com/us-en/kubernetes-service/create-auth-credentials-on-azure.html)" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Request doc changes</a>
      
    </span>
  </h1>
</div>

<p class="page-details">

<time datetime="2019-03-15 17:36:04 +0000">03/15/2019</time>


<span>Contributors
  
  <a target="_blank" href="https://github.com/ebarcott">
    <img  class="avatar avatar-small"
          alt="ebarcott"
          width="20" height="20"
          src="https://avatars3.githubusercontent.com/u/44878916?v=4"
          style="border-radius: 50%;"/>
  </a>
  
  <a target="_blank" href="https://github.com/akseldavis">
    <img  class="avatar avatar-small"
          alt="akseldavis"
          width="20" height="20"
          src="https://avatars2.githubusercontent.com/u/33839009?v=4"
          style="border-radius: 50%;"/>
  </a>
  
</span>

</p>

<div class="sect1">
<h2 id="table-of-contents">Table of Contents</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="#introduction">Introduction</a></p>
</li>
<li>
<p><a href="#option-1-recommended-create-an-active-directory-application-and-service-principal">Option 1: (Recommended) Create an Active Directory application and Service Principal</a></p>
</li>
<li>
<p><a href="#in-brief-finding-the-authentication-parameters">In Brief: Finding the Authentication Parameters</a></p>
</li>
<li>
<p><a href="#verify-azure-permissions-and-find-the-required-account-information">Verify Azure Permissions and Find the Required Account Information</a></p>
</li>
<li>
<p><a href="#option-2-use-the-command-line-tool">Option 2: Use the Command-Line Tool</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to access Azure resources from <a href="https://nks.netapp.io">NetApp Kubernetes Service (NKS)</a>, you will need to use one of the following sets of information to authorize against the Azure Active Directory:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Option 1:</strong> The subscription ID, an Active Directory application, and an authorized Service Principal. <strong>(Recommended)</strong></p>
</li>
<li>
<p><strong>Option 2:</strong> A resource group and service principal from the <a href="https://docs.microsoft.com/en-us/cli/azure/?view=azure-cli-latest">Azure CLI</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="option-1-recommended-create-an-active-directory-application-and-service-principal">Option 1: (Recommended) Create an Active Directory application and Service Principal</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For this approach you will set up an Azure Active Directory (AD) application and assign the required permissions to it. Microsoft recommends this approach instead of running the app under your own credentials because:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You can assign the app permissions independent from those which are assigned to your own account. This lets you restrict the app&#8217;s permissions to only those which it needs in order to function.</p>
</li>
<li>
<p>If you update the permissions on your own account, you won&#8217;t have to update the app&#8217;s credentials as well.</p>
</li>
<li>
<p>Unattended scripts can use a certificate to automate authentication.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>There are four authentication parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>AZURE_SUBSCRIPTION_ID</code>: A 32-character hexadecimal dash-separated string.</p>
</li>
<li>
<p><code>AZURE_TENANT_ID</code>: A 32-character hexadecimal dash-separated string.</p>
</li>
<li>
<p><code>AZURE_CLIENT_ID</code>: A 32-character hexadecimal dash-separated string.</p>
</li>
<li>
<p><code>AZURE_CLIENT_SECRET</code>: Password generated by you.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To set this up, <a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-create-service-principal-portal">follow the steps in the official Documentation here</a>.</p>
</div>
<div class="sect2">
<h3 id="in-brief-finding-the-authentication-parameters">In Brief: Finding the Authentication Parameters</h3>
<div class="paragraph">
<p><strong>Subscription ID:</strong> All Services &gt; Subscriptions &gt; Subscription ID</p>
</div>
<div class="paragraph">
<p><strong>Tenant ID (Azure calls this the Directory ID):</strong> Azure Active Directory &gt; Properties &gt; Directory ID</p>
</div>
<div class="paragraph">
<p><strong>Client ID (Azure calls this the Application ID):</strong> All Services &gt; Filter by “app registrations” &gt; App Registrations &gt; Click your application &gt; Copy the Application ID</p>
</div>
<div class="paragraph">
<p><strong>Auth Key:</strong> All Services &gt; Filter by “app registrations” &gt; App Registrations &gt; Click your application &gt; Settings &gt; Keys &gt; Create a new key</p>
</div>
</div>
<div class="sect2">
<h3 id="verify-azure-permissions-and-find-the-required-account-information">Verify Azure Permissions and Find the Required Account Information</h3>
<div class="sect3">
<h4 id="step-1-check-app-registration-settings">Step 1: Check App Registration Settings</h4>
<div class="paragraph">
<p>Your Azure login needs to have enough permissions to register an application with your Azure AD tenant, and assign the application to a role in your Azure subscription. To verify this, log in to  <a href="https://portal.azure.com/">the Azure portal</a>, then go to <strong>Azure Active Directory &gt; User settings &gt; App Registrations.</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/documentation/create-auth-credentials-on-azure/app-registrations.png?raw=true" alt="Azure Auth: App Registrations">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>If “Users can register applications” is set to <strong>Yes</strong> any Azure AD tenant can register an app. You can proceed.</p>
</li>
<li>
<p>If “Users can register applications” is set to <strong>No</strong> only global administrators can register apps.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="step-2-check-account-permissions">Step 2: Check Account Permissions</h4>
<div class="paragraph">
<p>Click <strong>Azure Active Directory &gt; Overview</strong> to check your account permissions. In this example, the account’s role is <strong>User</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/documentation/create-auth-credentials-on-azure/user-role.png?raw=true" alt="Azure Auth: User Role">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>If your account is assigned to the <strong>Global administrator</strong> role, you can proceed.</p>
</li>
<li>
<p>If your account is assigned to the <strong>User</strong> role, and “Users can register applications” is set to <strong>Yes,</strong> you can proceed.</p>
</li>
<li>
<p>If your account is assigned to the <strong>User</strong> role, and “Users can register applications” is set to <strong>No,</strong> you will NOT be able to register an app. You have two options:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ask your administrator to assign your account to the Global administrator role.</p>
</li>
<li>
<p>Ask your administrator to enable users to register apps.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="step-3-check-the-subscription">Step 3: Check the Subscription</h4>
<div class="paragraph">
<p>You must have an Azure subscription created and assigned to the Azure directory. The subscription must be registered with the resource provider “Microsoft.Network.”</p>
</div>
<div class="paragraph">
<p>To check this, click <strong>All services &gt; Subscriptions</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/documentation/create-auth-credentials-on-azure/subscription-id.png?raw=true" alt="Azure Auth: Subscription ID">
</div>
</div>
<div class="paragraph">
<p>From here you can assign a subscription to your Azure directory, or switch Azure directories.</p>
</div>
<div class="paragraph">
<p><strong>NOTE: Copy the Subscription ID. You will need it to create your NKS cluster.</strong></p>
</div>
<div class="paragraph">
<p>If you don’t have a subscription set up yet, click <strong>+ Add</strong> to add one.</p>
</div>
<div class="paragraph">
<p>The resource provider <code>Microsoft.Network</code> is not registered by default. You will need to register it. Select the subscription, then click <strong>Settings: Resource Providers</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/documentation/create-auth-credentials-on-azure/microsoft-network-resource-provider.png?raw=true" alt="Azure Auth: Resource provider">
</div>
</div>
<div class="paragraph">
<p>Here you can check whether <code>Microsoft.Network</code> is registered. If it is not, then locate the service and click <strong>Register</strong>.</p>
</div>
</div>
<div class="sect3">
<h4 id="step-4-check-your-accounts-role-for-the-subscription">Step 4: Check Your Account&#8217;s Role for the Subscription</h4>
<div class="paragraph">
<p>Your account role must be either <strong>Owner</strong>, <strong>Account Admin</strong>, or <strong>User Access Administrator.</strong> If your account role is Contributor, it won’t work.</p>
</div>
<div class="paragraph">
<p>To check this, go to <strong>Home &gt; Subscriptions</strong> and check the <strong>My Role</strong> column.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/documentation/create-auth-credentials-on-azure/my-subscription-role.png?raw=true" alt="Azure Auth: My Subscription Role">
</div>
</div>
</div>
<div class="sect3">
<h4 id="step-5-create-an-azure-active-directory-application">Step 5: Create an Azure Active Directory application</h4>
<div class="ulist">
<ul>
<li>
<p>Go to <strong>Azure Active Directory &gt; App registrations &gt; New application registration</strong>.</p>
</li>
<li>
<p>Enter a name for the app.</p>
</li>
<li>
<p>Select <strong>Web app/API</strong> for the application type.</p>
</li>
<li>
<p>Enter the URL for the app.</p>
</li>
<li>
<p>Click <strong>Create</strong></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="step-6-get-the-application-id-client-id">Step 6: Get the Application ID (Client ID)</h4>
<div class="paragraph">
<p>Go to <strong>All services &gt;</strong> filter by “app registrations” &gt; <strong>App Registrations</strong>. If this is a new app, you will need to register it. Click <strong>New application registration &gt;</strong> Fill out the app’s details <strong>&gt; Save</strong>.</p>
</div>
<div class="paragraph">
<p><strong>NOTE: Copy the Application ID.</strong> This is the Client ID you will need to create your NKS cluster.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/documentation/create-auth-credentials-on-azure/app-id.png?raw=true" alt="Azure Auth: App ID">
</div>
</div>
</div>
<div class="sect3">
<h4 id="step-7-generate-an-authentication-key">Step 7: Generate an Authentication Key</h4>
<div class="paragraph">
<p>On the App Registrations page, click the app, then click <strong>Settings &gt; Keys &gt;</strong> Fill in the description and expiration date <strong>&gt; Save.</strong> This will generate the key.</p>
</div>
<div class="paragraph">
<p><strong>IMPORTANT: Copy the key value and save it.</strong> You will not be able to retrieve this key later. <strong>This is your only chance to get the auth key.</strong></p>
</div>
</div>
<div class="sect3">
<h4 id="step-8-get-the-tenant-id">Step 8: Get the Tenant ID</h4>
<div class="paragraph">
<p>Click <strong>Azure Active Directory &gt; Properties &gt; Directory ID.</strong>  This is the Tenant ID you need to create your NKS cluster.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/documentation/create-auth-credentials-on-azure/tenant-id.png?raw=true" alt="Azure Auth: Tenant ID">
</div>
</div>
</div>
<div class="sect3">
<h4 id="step-9-choose-a-role-and-scope-for-the-app">Step 9: Choose a Role and Scope for the App</h4>
<div class="paragraph">
<p>Decide which built-in RBAC role offers the right permissions for your application.</p>
</div>
<div class="paragraph">
<p>For a list of all built-in RBAC roles and their permissions, see <a href="https://docs.microsoft.com/en-us/azure/role-based-access-control/built-in-roles">the official RBAC documentation</a>.</p>
</div>
<div class="paragraph">
<p>Azure has three scope levels:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Subscription (highest)</p>
</li>
<li>
<p>Resource group</p>
</li>
<li>
<p>Resource (lowest)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Permissions are inherited by lower scope levels. For example, if you add an app to the Reader role for a resource group, the app will have Read access to that resource group and any resources it contains.</p>
</div>
<div class="paragraph">
<p>To assign the app&#8217;s scope and role:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Go to the scope level (subscription, resource group, or resource) you want to use for the app.</p>
</li>
<li>
<p>Click the subscription/resource group/resource the app will be assigned to.</p>
</li>
<li>
<p>Click <strong>Access Control (IAM) &gt; + Add &gt; Click the role &gt; </strong>Search to find your app <strong>&gt; Click the app &gt; Save</strong>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="option-2-use-the-command-line-tool">Option 2: Use the Command-Line Tool</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Authentication Parameters</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Subscription ID:</strong> Azure calls this "ID" in the output of the <code>az login</code> command.</p>
</li>
<li>
<p><strong>Tenant ID</strong>: Azure calls this the Directory ID.</p>
</li>
<li>
<p><strong>Client ID</strong>: Azure calls this the Application ID.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Log in to the <a href="https://docs.microsoft.com/en-us/cli/azure/?view=azure-cli-latest">Azure CLI</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>az login</pre>
</div>
</div>
<div class="paragraph">
<p>Follow the instructions to authenticate. After the log-in and authentication process is complete, this will output account information including the Subscription ID.</p>
</div>
<div class="paragraph">
<p>Note: The Subscription ID is labeled just "ID" in the output of the <code>az login</code> command.</p>
</div>
<div class="paragraph">
<p>Set the account with the subscription ID.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>az account set --subscription "[subscription ID]"</pre>
</div>
</div>
<div class="paragraph">
<p>For example, if the subscription ID is <strong>a123-b456-c789</strong> the command is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>az account set --subscription "a123-b456-c789"</pre>
</div>
</div>
<div class="paragraph">
<p>Create a resource group if one does not already exist.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>az group create -n "[resource group name]" -l "westus"</pre>
</div>
</div>
<div class="paragraph">
<p>For example, if the resource group name is <strong>myResourceGroup</strong> the command is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>az group create -n "myResourceGroup" -l "westus"</pre>
</div>
</div>
<div class="paragraph">
<p>Create the service principal:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>az ad sp create-for-rbac --role="Contributor" --scopes="/subscriptions/[subscription ID]/resourceGroups/[resource group name]"</pre>
</div>
</div>
<div class="paragraph">
<p>For example, if the subscription ID is <strong>a123-b456-c789</strong> and the resource group name is <strong>myResourceGroup</strong>, the command is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>az ad sp create-for-rbac --role="Contributor" --scopes="/subscriptions/a123-b456-c789/resourceGroups/myResourceGroup" -o table</pre>
</div>
</div>
<div class="paragraph">
<p>This will output account information including the app ID.</p>
</div>
<div class="paragraph">
<p>Assign the service principal with the role <strong>Contributor</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>az role assignment create --assignee [appID] --role Contributor</pre>
</div>
</div>
<div class="paragraph">
<p>For example, if the app ID is <strong>1234-5678</strong>, the command is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>az role assignment create --assignee 1234-5678 --role Contributor</pre>
</div>
</div>
</div>
</div>

        </article>
        <!-- Page Container -->
      </div>

      
      <div class="page-nav-container">
        <nav class="page-nav-fixed">
          <div class="page-nav-title">On this page:</div>
          <ul class="page-nav-inner" id="page-menu"></ul>
        </nav>
      </div>
      

    </div>
  </div>
</div>

      </main>

      <!-- Footer -->
      
      <footer class="n-footer n-footer--v1" style="border-top: solid 10px #DFDFDF;">
        <div class="n-footer__bottom">
          <div class="n-container">
            <div class="n-footer__bottom-left">
              <div class="n-footer__copyright">
                  <a href="//www.netapp.com/us/legal/copyright.aspx" class="n-footer__copyright-link">© 2019 NetApp, Inc.</a>
              </div>
              <div class="n-footer__copyright">
                <a href="https://library.netapp.com/ecm/ecm_download_file/ECMLP2848669" class="n-footer__copyright-link">Notice</a>
              </div>
              <div class="n-footer__copyright">
                <a href="//www.netapp.com/us/legal/index.aspx" class="n-footer__copyright-link">Legal</a>
              </div>
              <div class="n-footer__social-links n-footer__copyright">
                <ul class="n-footer__social-link-list">
                  <li class="n-footer__social-link-list-item">
                    <a class="n-footer__social-link" data-ntap-social="follow-blog" href="http://blog.netapp.com" target="_blank" title="blog" alt="blog">
                      <span class="n-footer__social-link-text">blog</span>
                      <svg class="n-icon-blog n-footer__social-link-icon" aria-labelledby="title">
                        <title>blog@</title>
                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/kubernetes-service/us-en/common/svg/sprite.svg#blog"></use>
                      </svg>
                    </a>
                  </li>
                  <li class="n-footer__social-link-list-item">
                    <a class="n-footer__social-link" data-ntap-social="follow-community" href="http://community.netapp.com/" target="_blank" title="community" alt="community">
                      <span class="n-footer__social-link-text">community</span>
                      <svg class="n-icon-twitter n-footer__social-link-icon" aria-labelledby="title">
                        <title>community@</title>
                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/kubernetes-service/us-en/common/svg/sprite.svg#comments"></use>
                      </svg>
                    </a>
                  </li>

                  <li class="n-footer__social-link-list-item">
                    <a class="n-footer__social-link" data-ntap-social="follow-twitter" href="https://twitter.com/netappdoc" target="_blank" title="twitter" alt="twitter">
                      <span class="n-footer__social-link-text">twitter</span>
                      <svg class="n-icon-twitter n-footer__social-link-icon" aria-labelledby="title">
                        <title>twitter@</title>
                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/kubernetes-service/us-en/common/svg/sprite.svg#twitter"></use>
                      </svg>
                    </a>
                  </li>
                  <li class="n-footer__social-link-list-item">
                    <a class="n-footer__social-link" data-ntap-social="follow-youtube" href="https://www.youtube.com/user/NetAppTechCommTV/" target="_blank" title="youtube" alt="youtube">
                      <span class="n-footer__social-link-text">youtube</span>
                      <svg class="n-icon-youtube n-footer__social-link-icon" aria-labelledby="title">
                        <title>youtube@</title>
                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/kubernetes-service/us-en/common/svg/sprite.svg#youtube"></use>
                      </svg>
                    </a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="n-footer__bottom-right">
              <div class="n-footer__copyright">
                <a href="https://docs.netapp.com/us-en/contribute/" class="n-footer__copyright-link">Contribute</a>
              </div>
              <div class="n-footer__copyright">
                <a target="_self" class="n-footer__copyright-link" href="javascript:netapp_mailto()">Email your feedback</a>
              </div>
            </div>
          </div>
        </div>
      </footer>

    </div>

    <script src="/kubernetes-service/us-en/common/js/components.js"></script>
    <script src="/kubernetes-service/us-en/common/js/doc-components.js"></script>

    <!-- Elasticsearch JS -->
    <script type="text/javascript" src='/kubernetes-service/us-en/js/bundle.js'></script>

    <!-- Syntax Highlighting -->
    <script type="text/javascript" src='/kubernetes-service/us-en/js/prism.js'></script>
    <script type="text/javascript" src='/kubernetes-service/us-en/js/prism-curl.js'></script>

  </body>

  
</html>
